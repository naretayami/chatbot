{% extends "layout.html" %}
{% block time %}

<h3><a class="logout" href="/logout">ログアウト</a></h3>

<h3>{{ name }}さん、ようこそ。</h3>
<h3><a class="chatbot" href="/home">Chatbot</a></h3>

<h3>記録</h3>


<p>編集</p>
<form action="/update" method="post">
    <input type="text" name="kamoku" placeholder="科目">
    <input type="text" name="kiroku" placeholder="記録">
    <input type="integer" name="time" placeholder="時間">
    <input type="submit" value="更新">
</form>

<div class="table-responsive">
    <table class="table table-striped">
        <tr>
            <th>科目</th>
            <th>内容</th>
            <th>勉強時間</th>
            <th>登録日時</th>

        </tr>
        {% for study in all_study %}
        {% if study.userid == name %}
        <tr>
            <td>{{study.kamoku}}</td>
            <td>{{study.kiroku}}</td>
            <td>{{study.time}}時間</td>
            <td>{{study.date}}</td>
        </tr>
        {% endif %}
        {% endfor %}
    </table>
</div>


<p>新規追加</p>
<form action="/add" method="post">
    <input type="text" name="kamoku" placeholder="科目">
    <input type="text" name="kiroku" placeholder="記録">
    <input type="number" name="time" placeholder="時間">
    <input type="submit" value="追加">
</form>

<h1 class="h3 mt-2 mb-3 font-weight-normal">新規追加</h1>
<form class="w-25 mx-auto" action="/add" method="post">
    <label for="" class="sr-only"></label>
    <input class="form-control" id="" type="text" name="kamoku" placeholder="科目" required autofocus />
    <label for="" class="sr-only"></label>
    <input class="form-control" id="" type="text" name="kiroku" placeholder="記録" />
    <label for="" class="sr-only"></label>
    <input class="form-control" id="" type="number" name="time" placeholder="時間" required autofocus />
    <input class="btn btn-outline-primary my-1" type="submit" value="追加" />
</form>

{% for study in all_study %}
<div>
    <input type="radio" name="update" value={{study.id}}>
    <input type="checkbox" name="delete" form="delete" value="{{study.id}}">

    {{study.kamoku}}：{{study.kiroku}}:{{study.time}}時間（{{study.date}})
</div>
{% endfor %}

<br>
<form action="/delete" method="post" id="delete">
    <input type="submit" value="チェックしたアイテムを削除する">
</form>

<!-- <script type="text/javascript" src="js/home.js">
    var nowtime_doc = document.getElementById("nowtime");
    nowtime_doc.innerHTML = "TIME " + get_message();
</script> -->

<canvas id="graph-area" height="450" width="600"></canvas>
<script src="https://cdnjs.cloudflare.com/ajax/tdbs/Chart.js/1.0.2/Chart.min.js" type="text/javascript"></script>

<script type="text/javascript">


    // ▼グラフの中身
    var pieData = [
        {
            value: 240,            // 値
            color: "#F7464A",       // 色
            hightdght: "#FF5A5E",  // マウスが載った際の色
            label: "りんご"        // ラベル
        },
        {
            value: 50,
            color: "#41C44E",
            hightdght: "#6CD173",
            label: "メロン"
        },
        {
            value: 100,
            color: "#FDB45C",
            hightdght: "#FFC870",
            label: "みかん"
        },
        {
            value: 65,
            color: "#AA49B8",
            hightdght: "#C583CF",
            label: "ぶどう"
        },
        {
            value: 75,
            color: "#4D5360",
            hightdght: "#616774",
            label: "その他"
        }

    ];

    // ▼上記のグラフを描画するための記述
    window.onload = function () {
        var ctx = document.getElementById("graph-area").getContext("2d");
        window.myPie = new Chart(ctx).Pie(pieData);
    };

</script>


{% endblock %}